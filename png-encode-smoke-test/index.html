<!DOCTYPE html>
<meta charset="utf-8">
<title>PNG encode - smoke test</title>
<<script charset="utf-8">
function myOnLoadHandler() {
  const canvas = document.getElementById("my-canvas-id");
  const ctx = canvas.getContext("2d");
  ctx.fillStyle = "gray";
  ctx.fillRect(0, 0, 100, 100);
  ctx.fillStyle = "green";
  ctx.fillRect(30, 30, 40, 40);

  const img = document.getElementById("my-img-id");
  img.src = canvas.toDataURL();
}
</script>
<body onLoad="myOnLoadHandler()">
  <p>
  This page helps to smoke-test whether a browser correctly implements encoding
  a `canvas` element into a PNG image encoded in a `data:` URL.  The motivation
  for creating this smoke-test is
  <a href="https://docs.google.com/document/d/1glx5ue5JDlCld5WzWgTOGK3wsMErQFnkY5N5Dsbi91Y/edit?usp=sharing">the project</a>
  to transition Chromium away from `libpng` and use Rust `png` crate instead -
  see here for more details about this project.
  </p>
  <hr>
  <p>
    The `onLoad` event should populate the `canvas`-based picture with a green
    rectangle inside a bigger gray rectangle:
  </p>
  <br>
  <canvas id="my-canvas-id" width="100" height="100"></canvas>
  <br>
  <hr>
  <p>
    The `onLoad` event should replicate the `canvas` into a `data:` URL displayed
    in the `img` element below:
  </p>
  <br>
  <img id="my-img-id" width="100" height="100">
</body>
